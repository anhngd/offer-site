(function(window){var document=window.document,navigator=window.navigator,console=window.console,localStorage=window.localStorage,isReady=false,zmCore=window.zmCore=function(selector,context){if(selector!=undefined){if(!(this instanceof zmCore)||context===undefined){return new zmCore(selector,"init")}zmCore.fn.init.call(this,selector,context);return this}return null};zmCore.prototype={size:function(){return this.length},bind:function(eventName,callback,weight){if(this.length<1){return this}var events=eventName.split(" ");for(var i=0;i<events.length;i++){if(events[i].indexOf("zm")==0){fn.Event.bind(this,events[i],callback,weight)}else{fn.bind(this,events[i],callback,weight)}}return this},unbind:function(eventName,callback){if(this.length<1){return this}var extEvent=eventName.indexOf("zm")==0;for(var i=0,elem;elem=this[i];i++){if(eventName=="clickoutside"){fn.removeCoCallback(elem);continue}if(extEvent){fn.Event.unbind(this[i],eventName,callback);continue}var cached=zmCore.data(elem,"zmCore.events."+eventName);if(!cached){continue}var index,callbacks=cached.callbacks;for(var j=0,d;d=callbacks[j];j++){if(d.cb==callback){index=j;break}}index!==-1&&cached.callbacks.splice(index,1)}return this},unbindAll:function(eventName){var events=eventName.split(" ");for(var i=0,elem;elem=this[i];i++){for(var j=0,evt;evt=events[j];j++){if(evt=="clickoutside"){fn.removeCoCallback(elem);zmCore.removeData(elem,"clickoutside.group");continue}var cached=zmCore.data(elem,"zmCore.events."+evt);if(!cached){continue}if(elem.detachEvent){elem.detachEvent("on"+fn.mapEventName(evt),cached.func)}else{if(elem.removeEventListener){elem.removeEventListener(fn.mapEventName(evt),cached.func,false)}}zmCore.removeData(elem,"zmCore.events."+evt)}}return this},blur:function(callback,weight){return fn.bind(this,"blur",callback,weight)},click:function(callback,weight){return fn.bind(this,"click",callback,weight)},change:function(callback,weight){return fn.bind(this,"change",callback,weight)},dblclick:function(callback,weight){return fn.bind(this,"dblclick",callback,weight)},clickOutside:function(callback,weight,force,group){if(zmCore.isFunction(callback)){for(var i=0,e;e=this[i];i++){var parentGroups=fn.getParentGroups(e),g=zmCore.data(e,"clickoutside.group"),result;if(zmCore.isString(g)&&g.indexOf("zmcog.")!=0){g=null}result=fn.addCoCallback(e,group||g,parentGroups,callback,weight);result!=g&&zmCore.data(e,"clickoutside.group",result)}if(force){var newGroup=this.data("clickoutside.group");zmCore.inArray(newGroup,curClickGroups)<0&&fn.fireCo(curClickGroups,this);curClickGroups.push(newGroup)}fn.bindCo()}else{fn.fireCo(this[0])}return this},clickOutsideWith:function(elems){if(this.size()>0){var e=this[0],g=zmCore.data(e,"clickoutside.group");if(g){if(!zmCore.isArray(elems)&&!(elems instanceof zmCore)){elems=[elems]}var groups=[];for(var i=0,elem;elem=elems[i];i++){zmCore.data(elem,"clickoutside.group",g);groups=groups.concat(fn.getParentGroups(elem))}if(coCallbacks[g]){for(var i=0,item;item=coCallbacks[g][i];i++){if(item.element==e){if(!item.parents){item.parents=[]}for(var j=0,gp;gp=groups[j];j++){if(zmCore.inArray(gp,item.parents)){item.parents.push(gp)}}}}}}}return this},markClickOutside:function(){if(this.size()>0){var group=this.data("clickoutside.group");group&&curClickGroups.push(group)}return this},focus:function(callback,weight){return fn.bind(this,"focus",callback,weight)},keydown:function(callback,weight){return fn.bind(this,"keydown",callback,weight)},keypress:function(callback,weight){return fn.bind(this,"keypress",callback,weight)},keyup:function(callback,weight){return fn.bind(this,"keyup",callback,weight)},mousedown:function(callback,weight){return fn.bind(this,"mousedown",callback,weight)},mouseup:function(callback,weight){return fn.bind(this,"mouseup",callback,weight)},mousemove:function(callback,weight){return fn.bind(this,"mousemove",callback,weight)},mouseenter:function(callback,weight){return fn.bind(this,"mouseenter",callback,weight)},mouseleave:function(callback,weight){return fn.bind(this,"mouseleave",callback,weight)},hover:function(enter,leave){return this.mouseenter(enter).mouseleave(leave)},transitionEnd:function(callback,weight){if(zm.browser.chrome||zm.browser.safari){return fn.bind(this,"webkitTransitionEnd",callback,weight)}else{if(zm.browser.opera){return fn.bind(this,"oTransitionEnd",callback,weight)}}return fn.bind(this,"transitionend",callback,weight)},mousewheel:function(callback,weight){if(zmCore.browser.firefox){return fn.bind(this,"DOMMouseScroll",callback,weight)}else{return fn.bind(this,"mousewheel",callback,weight)}},resize:function(callback,weight){return fn.bind(this,"resize",callback,weight)},scroll:function(callback,weight){return fn.bind(this,"scroll",callback,weight)},submit:function(callback,weight){return fn.bind(this,"submit",callback,weight)},reset:function(callback,weight){return fn.bind(this,"reset",callback,weight)},select:function(callback,weight){return fn.bind(this,"select",callback,weight)},hashchange:function(callback){var w=this[0];if("onhashchange" in window){return fn.bind(this,"hashchange",callback)}else{if(w&&w.location){hashValue=w.location.hash;oldURL=w.location.href;setInterval(function(){if(hashValue!=w.location.hash){hashValue=w.location.hash;var event={};event.timeStamp=new Date().getTime();event.srcElement=event.target=w;event.oldURL=oldURL;event.newURL=oldURL=w.location.href;callback(event)}},hashChangeInv)}return this}},on:function(eventName,selector,callback,weight){if(!zmCore.isFunction(callback)){return this}for(var i=0,e;e=this[i];i++){var eventData=zmCore.data(e,"zmCore.events.on."+eventName);if(!eventData){eventData={};fn.bind([e],eventName,function(event){var source=event.sourceTarget,data=zmCore.data(source,"zmCore.events.on."+event.type);for(var sel in data){var target=zmCore(this).filter(sel);if(target.length<1){target=zmCore(this).parents(sel);if(target.length<1){continue}}for(var j=0,cbData;cbData=data[sel][j];j++){try{cbData.cb.call(target[0],event)}catch(ex){zmCore.log(ex.stack||ex)}}}});zmCore.data(e,"zmCore.events.on."+eventName,eventData)}if(!eventData[selector]){eventData[selector]=[]}eventData[selector].push({cb:callback,weight:weight});eventData[selector].sort(fn.sortByWeight)}return this},off:function(eventName,selector,callback){},each:function(callback){for(var i=0,elem;elem=this[i];i++){if(callback.call(elem,i,elem)==false){break}}},toArray:function(){var result=new Array();for(var i=0;i<this.size();i++){result.push(this[i])}return result},hasClass:function(className){return fn.hasClass(className,this[0])},addClass:function(className){if(zmCore.isString(className)){var classArray=className.split(" ");for(var i=0,elem;elem=this[i];i++){var classList=elem.classList;if(classList){for(var j=0,cl;cl=classArray[j];j++){classList.add(cl)}}else{var classNames=elem.className;if(!classNames){elem.className=className}else{var classes=classNames.split(" "),skip,length=classes.length;for(var j=0,cl;cl=classArray[j];j++){skip=false;for(var k=0;k<length;k++){if(classes[k]==cl){skip=true;break}}!skip&&classes.push(className)}elem.className=classes.join(" ")}}}}return this},removeClass:function(className){if(zmCore.isString(className)){var classArray=className.split(" ");for(var i=0,elem;elem=this[i];i++){var classList=elem.classList;if(classList&&classList.length>0){for(var j=0,cl;cl=classArray[j];j++){classList.remove(cl)}}else{var classNames=elem.className;if(!classNames){continue}var classes=classNames.split(" "),skip=true,length=classes.length;for(var j=0,cl;cl=classArray[j];j++){for(var k=0;k<length;k++){if(classes[k]==cl){classes.splice(k,1);skip=false;break}}}if(!skip){elem.className=classes.join(" ")}}}}return this},attr:function(name,value){if(!zmCore.isString(name)){for(var k in name){this.attr(k,name[k])}return this}if(value==undefined){return fn.attr(this[0],name)}for(var i=0,elem;elem=this[i];i++){fn.attr(elem,name,value)}return this},css:function(name,value){if(!zmCore.isString(name)){for(var k in name){this.css(k,name[k])}return this}var length=this.length;if(length==0){return}if(value!=undefined){for(var i=0;i<length;i++){fn.css(this[i],name,value,true)}return this}return fn.css(this[0],name)},val:function(value){var length=this.length;if(value==undefined){return length==0?undefined:this[0].value}for(var i=0;i<length;i++){this[i].value=value}return this},empty:function(){for(var i=0,elem;elem=this[i];i++){while(elem.firstChild){elem.removeChild(elem.firstChild)}}return this},html:function(content){var length=this.length;if(content==undefined){if(length==0){return}return this[0].innerHTML}try{for(var i=0;i<length;i++){this[i].innerHTML=fn.cleanHTML(content);fn.evalScripts(fn.getScripts(this[i]))}}catch(e){this.empty().append(content)}return this},text:function(content){var length=this.length;if(content==undefined){if(length==0){return}var elem=this[0];if(elem.textContent!=undefined){return elem.textContent}return elem.innerText}for(var i=0,e;e=this[i];i++){if(e.textContent!=undefined){e.textContent=content}else{e.innerText=content}}return this},before:function(content){var isStr=zmCore.isString(content);for(var i=0,e;e=this[i];i++){var p=e.parentNode;if(!isStr){p.insertBefore(content,e);continue}var d=zmCore.createElement("DIV");d.innerHTML=fn.cleanHTML(content);while(d.firstChild!=null){var c=d.firstChild;d.removeChild(c);p.insertBefore(c,e)}}return this},after:function(content){for(var i=0,e;e=this[i];i++){var c,p=e.parentNode,d=zmCore.createElement("DIV");d.innerHTML=fn.cleanHTML(content);if(p.lastChild==e){while(d.firstChild!=null){c=d.firstChild;d.removeChild(c);p.appendChild(c)}}else{var next=e.nextSibling;while(d.firstChild!=null){c=d.firstChild;d.removeChild(c);p.insertBefore(c,next)}}}return this},clone:function(){if(this.size()==0){return}return this[0].cloneNode(true)},append:function(content){if(this.size()==0){return this}var i,length=0,list,scripts=[];if(content instanceof zmCore){length=content.size();list=content}else{if(zmCore.isArray(content)){length=content.length;list=content}else{if(zmCore.isString(content)){list=new Array();var d=zmCore.createElement("DIV");d.innerHTML=fn.cleanHTML(content);while(d.firstChild!=null){var c=d.firstChild;if(c.nodeName.toLowerCase()=="script"&&c.type=="text/javascript"){scripts.push(d.removeChild(c))}else{list.push(c);scripts=fn.getScripts(c);d.removeChild(c)}}length=list.length}else{length=this.size();for(i=0;i<length;i++){this[i].appendChild(content)}return this}}}var f=document.createDocumentFragment();for(i=0;i<length;i++){f.appendChild(list[i])}length=this.size();for(i=0;i<length;i++){this[i].appendChild(f.cloneNode(true));scripts.length>0&&fn.evalScripts(scripts)}return this},prepend:function(content){if(this.size()==0){return this}var i,length=0,list,scripts=[];if(content instanceof zmCore){length=content.size();list=content}else{if(zmCore.isArray(content)){length=content.length;list=content}else{if(zmCore.isString(content)){list=new Array();var d=zmCore.createElement("DIV");d.innerHTML=fn.cleanHTML(content);while(d.firstChild!=null){var c=d.firstChild;if(c.nodeName.toLowerCase()=="script"&&c.type=="text/javascript"){scripts.push(d.removeChild(c))}else{list.push(c);scripts=fn.getScripts(c);d.removeChild(c)}}length=list.length}else{length=1;list=Array(1);list[0]=content}}}var f=document.createDocumentFragment();for(i=0;i<length;i++){f.appendChild(list[i])}var e;for(i=0;e=this[i];i++){if(e.hasChildNodes()){var fNode=e.firstChild;e.insertBefore(f.cloneNode(true),fNode)}else{e.appendChild(f.cloneNode(true))}scripts.length>0&&fn.evalScripts(scripts)}return this},remove:function(){for(var i=0,elem;elem=this[i];i++){zmCore.removeData(elem);elem.parentNode&&elem.parentNode.removeChild(elem)}},insertAtCaret:function(value){if(this.length==0){return}var e=this[0];if(document.selection){e.focus();var sel=document.selection.createRange();sel.text=value;e.focus()}else{if(e.selectionStart||e.selectionStart=="0"){var startPos=e.selectionStart,endPos=e.selectionEnd,scrollTop=e.scrollTop,newValue=e.value.substring(0,startPos)+value,newPos=startPos+value.length;newValue+=e.value.substring(endPos,e.value.length);e.value=newValue;e.focus();e.selectionStart=newPos;e.selectionEnd=newPos;e.scrollTop=scrollTop}else{e.value+=value;e.focus()}}fn.Event.trigger("zminsertatcaret",e,value);return this},offset:function(absPosition){if(this.size()==0){return}var o,v,e=this[0];if(e.getBoundingClientRect){o=e.getBoundingClientRect();var doc=e.ownerDocument,docElem=doc.documentElement||doc.body,left=o.left-(docElem.clientLeft||0),top=o.top-(docElem.clientTop||0);if(absPosition){v=zmCore.getViewport();return{left:left+v.offsetX,top:top+v.offsetY}}}else{o={left:e.offsetLeft,top:e.offsetTop};var op=o.offsetParent;while(op){o.left+=op.offsetLeft;o.top+=op.offsetTop;op=op.offsetParent}if(!absPosition){v=zmCore.getViewPort();o.left-=v.offsetX;o.top-=v.offsetY}}return{left:o.left,top:o.top}},position:function(){if(this.size()==0){return}return{left:this[0].offsetLeft,top:this[0].offsetTop}},top:function(){if(this.size()==0){return 0}return this.offset(true).top},left:function(){if(this.size()==0){return 0}return this.offset(true).left},innerWidth:function(){if(this.size()==0){return 0}var elem=this[0];return Math.max(0,elem.offsetWidth-zmCore.intval(fn.css(elem,"border-left-width"))-zmCore.intval(fn.css(elem,"border-right-width")))},outerWidth:function(margin){if(this.size()==0){return 0}var elem=this[0];if(margin){return Math.max(0,elem.offsetWidth+zmCore.intval(fn.css(elem,"margin-left"))+zmCore.intval(fn.css(elem,"margin-right")))}return Math.max(0,elem.offsetWidth)},width:function(){if(this.size()==0){return 0}var elem=this[0];return Math.max(0,this.innerWidth()-zmCore.intval(fn.css(elem,"padding-left"))-zmCore.intval(fn.css(elem,"padding-right")))},innerHeight:function(){if(this.size()==0){return 0}var elem=this[0];return Math.max(0,elem.offsetHeight-zmCore.intval(fn.css(elem,"border-top-width"))-zmCore.intval(fn.css(elem,"border-bottom-width")))},outerHeight:function(margin){if(this.size()==0){return 0}var elem=this[0];if(margin){return Math.max(0,elem.offsetHeight+zmCore.intval(fn.css(elem,"margin-top"))+zmCore.intval(fn.css(elem,"margin-bottom")))}return Math.max(0,elem.offsetHeight)},height:function(){if(this.size()==0){return 0}var elem=this[0];return Math.max(0,this.innerHeight()-zmCore.intval(fn.css(elem,"padding-top"))-zmCore.intval(fn.css(elem,"padding-bottom")))},scrollTop:function(top){if(this.size()==0){return 0}if(top==undefined){var t=this[0];if(t.nodeType==9||t==window){return document.documentElement.scrollTop||document.body.scrollTop}return t.scrollTop}else{for(var i=0,e;e=this[i];i++){if(e.nodeType==9||e==window){window.scrollTo(document.documentElement.scrollLeft||document.body.scrollLeft,top)}else{e.scrollTop=top}}}return this},scrollLeft:function(left){if(this.size()==0){return 0}if(left==undefined){var t=this[0];if(t.nodeType==9||t==window){return document.documentElement.scrollLeft||document.body.scrollLeft}return t.scrollLeft}else{for(var i=0,e;e=this[i];i++){if(e.nodeType==9||e==window){window.scrollTo(left,document.documentElement.scrollTop||document.body.scrollTop)}else{e.scrollLeft=left}}}return this},opacity:function(value,max){var i,val,e;if(zmCore.browser.msie&&zmCore.browser.version<9){for(i=0;e=this[i];i++){val=(zmCore.isArray(value)?value[i]:value);if(max&&val>max[i]){val=max[i]}val=val*100;if(value==""){e.style.removeAttribute("filter")}else{if(e.filters["DXImageTransform.Microsoft.Alpha"]==undefined){e.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+val+")"}else{e.filters["DXImageTransform.Microsoft.Alpha"].Opacity=val}}}}else{for(i=0;e=this[i];i++){val=zmCore.isArray(value)?value[i]:value;if(max&&val>max[i]){val=max[i]}e.style.opacity=val}}return this},fadeIn:function(duration,callback){return fn.fade(this,true,duration,callback)},fadeOut:function(duration,callback){return fn.fade(this,false,duration,callback)},show:function(){if(this.size()==0){return this}for(var i=0,elem;elem=this[i];i++){elem.style.display="";if(fn.css(elem,"display")!="none"){continue}var oldDisplay=zmCore.data(elem,"display");if(oldDisplay&&oldDisplay!="none"){elem.style.display=oldDisplay;continue}var tagName=elem.tagName.toUpperCase(),t=zmCore.createElement(tagName);document.body.appendChild(t);this[i].style.display=fn.css(t,"display");document.body.removeChild(t)}return this},hide:function(){if(this.size()==0){return this}for(var i=0,e;e=this[i];i++){zmCore.data(e,"display",fn.css(e,"display"))}this.css("display","none");return this},toggle:function(effect,options){for(var i=0,elem;elem=this[i];i++){if(fn.css(elem,"display")!="none"){zmCore(elem).hide(effect,options)}else{zmCore(elem).show(effect,options)}}return this},parents:function(selector){var result=[];if(this.size()==0){return}var p=this[0].parentNode;while(p){if(p.nodeType==1){result.push(p)}p=p.parentNode}return zmCore(zmCore.filter(result,selector))},parent:function(){if(this.size()==0){return}return zmCore(this[0].parentNode)},children:function(selector){if(this.size()==0){return}var result=new Array();for(var i=0,cn;(cn=this[0].childNodes[i])!=null;i++){if(cn.nodeType==1){result.push(cn)}}return zmCore(zmCore.filter(result,selector))},next:function(){if(this.size()==0){return}var elem=this[0],next=elem.nextSibling;while(next&&next.nodeType!=1){next=next.nextSibling;if(!next){return}}return zmCore(next)},prev:function(){if(this.size()==0){return}var elem=this[0],prev=elem.previousSibling;while(prev&&prev.nodeType!=1){prev=prev.previousSibling;if(!prev){return}}return zmCore(prev)},find:function(selector){var parents=new Array(),length=this.size();for(var i=0;i<length;i++){parents.push(this[i])}return zmCore(fn.findDOMElement(parents,selector))},filter:function(selector){return zmCore(zmCore.filter(this,selector))},get:function(param){var index;if(zmCore.isFunction(param)){index=param(this.size())}else{if(zmCore.isNumber(param)){index=param}else{if(param==":first"){index=0}else{if(param==":last"){index=this.size()-1}}}}return this[index]?zmCore(this[index]):undefined},data:function(name,data){if(this.size()>0&&data==undefined){return zmCore.data(this[0],name)}for(var i=0,e;e=this[i];i++){if(zmCore.isFunction(data)){data.call(e,zmCore.data(e,name))}else{zmCore.data(e,name,data)}}return this},removeData:function(name){for(var i=0,e;e=this[i];i++){zmCore.removeData(e,name)}return this},domData:function(name,value){if(value==undefined){if(this.size()<1){return}if(this[0].dataset){return this[0].dataset[name]}else{return fn.attr("data-"+name)}}for(var i=0,e;e=this[i];i++){if(e.dataset){e.dataset[name]=value}else{fn.attr(e,"data-"+name,value)}}return this},is:function(selector){if(this.size()==0){return false}var elem=this;if(selector.charAt(0)==":"){var attr=selector.substr(1),filter=filters[attr];for(var i=0,e;e=elem[i];i++){if(filter&&filter(e)){return true}}return false}return elem.length>0},placeholder:function(text,resetValue){if(zmCore.isString(text)){this.attr("placeholder",text)}if(!supportPlaceholder){for(var i=0,elem;elem=this[i];i++){if(!zmCore.data(elem,"placeholder.add")){zmCore(elem).focus(function(){var text=fn.attr(this,"placeholder");if(this.value==text){this.value="";zmCore(this).removeClass(zmCore.placeholderClass)}}).blur(function(){if(!this.value){this.value=fn.attr(this,"placeholder");zmCore(this).addClass(zmCore.placeholderClass)}})}if(resetValue!==false){elem.value=fn.attr(elem,"placeholder");zmCore(elem).addClass(zmCore.placeholderClass)}}}else{if(resetValue!==false){this.val("")}}return this}};zmCore.extend=function(){var target=arguments[0]||{},length=arguments.length,deep=false,i=1,src,value;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2}for(;i<length;i++){for(var key in arguments[i]){src=target[key];value=arguments[i][key];if(src===value){continue}if(deep&&value){var clone=zmCore.isArray(src)?[]:{};zmCore.extend(deep,clone,value)}else{if(value!=undefined){target[key]=value}}}}return target};var scripts=new Array(),readyCallbacks=new Array(),xDomainReg=new RegExp("^https?://"+window.location.host),jsonCallbacks={},zmId=0,zmGroupId=0,expandAttr="zmId"+new Date().getTime(),delExpandAttr=true,mouseenter=false,hoverIframe=false,windowData={},noData={embed:true,object:true,appled:true},convertAttrs={"class":"className","for":"htmlFor",readonly:"readOnly"},idleCallbacks,idleStatus=false,idleHandled=false,idleTimer,lastBusy=0,lastWndX,lastWndY,hashValue,oldURL,hashChangeInv=300,addCOListener=false,curClickGroups=new Array(),coCallbacks,escMap={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'"'},supportPlaceholder=false;var div=document.createElement("DIV");try{delete div.test;mouseenter=typeof div.onmouseenter!="undefined"}catch(ex){delExpandAttr=false}var supportCSSAnimation=false,vendors="Khtml Ms O Moz Webkit".split(" ");for(var i=0;i<vendors.length;i++){if(typeof div.style[vendors[i]+"Animation"]!=="undefined"){supportCSSAnimation=true;break}}div=null;var input=document.createElement("INPUT");try{supportPlaceholder="placeholder" in input}catch(ex){}var filters={hidden:function(elem){var width=elem.offsetWidth,height=elem.offsetHeight;return(width===0&&height===0)||zmCore.fn.css(elem,"display")==="none"},visible:function(elem){return !filters.hidden(elem)},enabled:function(elem){return elem.disabled===false&&elem.type!=="hidden"},disabled:function(elem){return elem.disabled===true},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},checked:function(elem){return elem.checked===true}};var Event={bind:function(elem,event,callback){if(!zmCore.isFunction(callback)){return}if(elem instanceof zmCore||zmCore.isArray(elem)){for(var i=0;i<elem.length;i++){Event.bind(elem[i],event,callback)}return}var callbacks=zmCore.data(elem,"zmCore.event."+event);if(!callbacks){callbacks=[];zmCore.data(elem,"zmCore.event."+event,callbacks)}callbacks.push(callback)},unbind:function(){},trigger:function(event,elem,data){var callbacks=zmCore.data(elem,"zmCore.event."+event);if(!callbacks){return}for(var i=0,callback;callback=callbacks[i];i++){callback.call(elem,data)}}};zmCore.fn={Event:Event,init:function(selector,context){var elements,i;if(zmCore.isArray(selector)){elements=selector}else{if(zmCore.isString(selector)){elements=[document];if(document.querySelectorAll){elements=fn.findDOMElement(elements,selector)}else{var subs=selector.split(" "),sLength=subs.length;for(i=0;i<sLength;i++){elements=fn.findDOMElement(elements,subs[i]);if(elements.length==0){break}}}}else{elements=[selector]}}var elemsLength=elements.length;if(zmCore.isArray(context)||context instanceof zmCore){i=0;while(i<elemsLength){if(zmCore.inArray(elements[i],context)==-1){elements.splice(i,1)}else{i++}}}elemsLength=elements.length;for(i=0;i<elemsLength;i++){this[i]=elements[i]}this.length=elemsLength},hasClass:function(className,e){className=zmCore.trim(className);if(!className||!e){return true}var cl=e.classList;if(cl){return cl.contains(className)}else{if((" "+e.className+" ").replace(/[\n\t]/g," ").indexOf(" "+className+" ")>-1){return true}}return false},checkClasses:function(classes,e){if(!classes||classes.length<1){return true}var r=0;for(var i=0,c;c=classes[i];i++){if(this.hasClass(c,e)){r++}}return r==classes.length},isSubElement:function(parents,e){if(zmCore.inArray(document,parents)!=-1){return true}var p=e.parentNode;while(p!=null){if(zmCore.inArray(p,parents)!=-1){return true}p=p.parentNode}return false},parseAttrStr:function(str){var result={};if(zmCore.isString(str)){var arr=str.split("]["),length=arr.length;for(var i=0;i<length;i++){var pair=arr[i].split("="),att=pair[0],value=pair[1],nindex=pair[0].indexOf("!"),not=false;if(value==undefined){value=true}typeof value=="string"&&zmCore.trim(value,"'\"");if(nindex==0||nindex==pair[0].length-1){att=nindex==0?pair[0].substr(1):pair[0].substr(0,nindex);not=true}result[att]={value:value,not:not}}}return result},checkAttributes:function(target,attrs){var valid=true;for(var f in attrs){if((fn.attr(target,f)==attrs[f].value)^!attrs[f].not){valid=false}}return valid},findDOMElement:function(parents,selector){var result=new Array(),i,plength=parents.length;if(document.querySelectorAll){for(i=0;i<plength;i++){var elems=parents[i].querySelectorAll(selector),elemsLength=elems.length;for(var j=0;j<elemsLength;j++){result.push(elems[j])}}}else{var found=new RegExp("(h[1-6]|[a-z]+)?(\\.[a-z0-9._-]+)?(#[a-z0-9_-]+)?(\\[(.*)\\])?","gi").exec(selector),e,attrs,tagName=found[1]?found[1].toLowerCase():"*",classes=found[2]?found[2].substr(1).split("."):undefined,id=found[3]?found[3].substr(1):undefined;if(found[5]){attrs=fn.parseAttrStr(found[5])}if(id!=undefined){e=document.getElementById(id);if(e&&(e.tagName.toLowerCase()==tagName||tagName=="*")&&fn.checkClasses(classes,e)&&fn.isSubElement(parents,e)){if(found[5]){if(fn.checkAttributes(e,attrs)){result.push(e)}}else{result.push(e)}}}else{for(j=0;j<plength;j++){elems=parents[j].getElementsByTagName(tagName);for(i=0;(e=elems[i])!=null;i++){if(fn.checkClasses(classes,e)&&fn.isSubElement([parents[j]],e)){if(found[5]){if(fn.checkAttributes(e,attrs)){result.push(e)}}else{result.push(e)}}}}}}return result},bind:function(elements,eventName,callback,weight,selector){var i,elem,orgEvent=eventName;eventName=fn.mapEventName(eventName);if(callback==undefined){if(eventName=="select"){this[0]&&this[0].select()}for(i=0;elem=elements[i];i++){if(elem[eventName]!=undefined){elem[eventName]()}else{fn.fireEvent(elem,eventName)}}}else{if(zmCore.isFunction(callback)){var self=elements;for(i=0;elem=elements[i];i++){var element=((eventName=="scroll"||eventName=="resize")&&elem==window)?document:elem,cached=zmCore.data(element,"zmCore.events."+eventName);if(!cached){cached={callbacks:new Array(),orgEvent:orgEvent};zmCore.data(element,"zmCore.events."+eventName,cached);cached.func=function(event){var target,eventName=event.type,eventData=zmCore.data(element,"zmCore.events."+eventName);if(window.event){event=window.event;target=event.srcElement}else{target=event.target}event.sourceTarget=element;if(!event.stopPropagation){event.stopPropagation=function(){this.cancelBubble=true}}if(!event.preventDefault){event.preventDefault=function(){this.returnValue=false}}if(eventName=="resize"){var v=zmCore.getViewport();if(v.width==lastWndX&&v.height==lastWndY){return false}lastWndX=v.width;lastWndY=v.height}var orgEvent=eventData.orgEvent,hoverEvent=(orgEvent=="mouseenter"||orgEvent=="mouseleave")&&!mouseenter;if(hoverEvent){var cancel=orgEvent=="mouseleave",e=event.relatedTarget||(cancel?event.toElement:event.fromElement);if(e){if(zmCore.inArray(e,self)==-1){cancel=false;while(e!=null){if(zmCore.inArray(e,self)!=-1){cancel=true;break}try{e=e.parentNode}catch(ex){break}}}if(cancel){fn.cancelBubble(event);return false}}while(zmCore.inArray(target,self)==-1){target=target.parentNode}}var callbacks,rs=true;if(eventData&&zmCore.isArray(eventData.callbacks)){callbacks=eventData.callbacks;for(var j=0,c;c=callbacks[j];j++){try{if(zmCore.isFunction(c.cb)&&c.cb.call(target,event)==false){rs=false}if(event.stopAllHandlers==true){break}}catch(ex){ex=ex.stack||ex;zmCore.log(ex)}}}!rs&&fn.cancelEvent(event);return rs};if(elem.attachEvent){elem.attachEvent("on"+eventName,cached.func)}else{if(elem.addEventListener){elem.addEventListener(eventName,cached.func,false)}}}cached.callbacks.push({cb:callback,weight:weight});cached.callbacks.sort(fn.sortByWeight)}}}return elements},mapEventName:function(eventName){if(!mouseenter){switch(eventName){case"mouseenter":return"mouseover";case"mouseleave":return"mouseout"}}return eventName},cancelEvent:function(event){if(event.preventDefault){event.preventDefault()}else{event.returnValue=false}},cancelBubble:function(event){if(event.stopPropagation){event.stopPropagation()}else{event.cancelBubble=true}return false},fireEvent:function(element,eventName){var event;if(document.createEvent){event=document.createEvent("HTMLEvents");event.initEvent(eventName,true,true);return !element.dispatchEvent(event)}else{event=document.createEventObject();return element.fireEvent("on"+eventName,event)}},addScript:function(url,callback){var script=document.createElement("SCRIPT");script.setAttribute("type","text/javascript");script.setAttribute("src",url);script.setAttribute("charset","utf-8");script.setAttribute("defer","defer");script.setAttribute("async","async");document.getElementsByTagName("HEAD")[0].appendChild(script);if(callback!=undefined){if(zmCore.browser.opera&&parseFloat(zmCore.browser.version)<9.8){callback.call(window)}else{if(zmCore.browser.msie){var called=false;script.onreadystatechange=function(){if(this.readyState=="loaded"||this.readyState=="complete"){if(url==this.src&&!called){callback.call(window);called=true}}}}else{script.onload=callback}}}return script},loadScripts:function(){var addScript=fn.addScript;for(var i=0,s;s=scripts[i];i++){addScript(s.url,s.callback)}},sortByWeight:function(a,b){return zmCore.intval(a.weight)-zmCore.intval(b.weight)},createXHR:function(url){if(window.XDomainRequest&&/^https?:\/\//i.test(url)&&!xDomainReg.test(url)){return new XDomainRequest()}if(!window.ActiveXObject){return new XMLHttpRequest()}return new ActiveXObject("Microsoft.XMLHTTP")},makeParams:function(data,addRandom){var params="",randomParam="";if(addRandom){randomParam="zmrp="+Math.floor(Math.random()*100000)}if(typeof data=="object"){params=zmCore.param(data)}else{if(data){params=data}}if(!randomParam){return params}if(params){params+="&"+randomParam}else{params=randomParam}return params},send:function(method,url,data,options,success,error,complete){options=zmCore.extend({dataType:"text"},options);var reqTimeout,req=fn.createXHR(url);function doSuccess(){if(!zmCore.isFunction(success)){return}if(options.dataType=="json"){try{var respData=zmCore.parseJSON(req.responseText);success.call(req,respData)}catch(e){zmCore.isFunction(error)&&error.call(req,req.responseText)}}else{success.call(req,req.responseText)}}function doError(){zmCore.isFunction(error)&&error.call(req,req.responseText)}function doComplete(){zmCore.isFunction(complete)&&complete.call(req,req.responseText)}if(typeof req.onload!="undefined"){req.onload=function(){clearTimeout(reqTimeout);if(req.status==200){doSuccess()}else{doError()}doComplete()};req.onerror=function(){clearTimeout(reqTimeout);doError();doComplete()}}else{req.onreadystatechange=function(){if(req.readyState!=4){return}clearTimeout(reqTimeout);if(req.status==200){doSuccess()}else{doError()}doComplete()}}try{var isPostXDomain=method=="POST"&&window.XDomainRequest&&req instanceof XDomainRequest,params=fn.makeParams(data,isPostXDomain);if(isPostXDomain){method="GET"}if(method=="GET"&&params){if(url.indexOf("?")<0){url+="?"}url+=params}req.open(method,url);if(options.timeout!=undefined){reqTimeout=setTimeout(function(){req.abort()},options.timeout)}if(method=="POST"&&!isPostXDomain){if(typeof req.setRequestHeader!="undefined"){req.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}req.send(params)}else{req.send(null)}}catch(e){doError();doComplete()}},camelCase:function(name){return name.replace(/-([a-z])/g,function(match,t){return t.toUpperCase()}).replace("-","")},deCamelCase:function(name){return name.replace(/[A-Z]/g,function(match){return"-"+match.toLowerCase()})},convertStyleName:function(name){name=name.replace(/-[a-z]/gi,function(match){return match.charAt(1).toUpperCase()});return fn.cssProps[name]||name},cssProps:{},attr:function(element,name,value){if(!element||element.nodeType!=1){return}name=convertAttrs[name]||name;var special=/src|href/i.test(name),set=value!=undefined;if(name in element&&!special){if(set&&!(name=="type"&&/input|button/i.test(element.nodeName)&&element.parentNode)){element[name]=value}return element[name]}if(set){element.setAttribute(name,""+value)}var attr=special?element.getAttribute(name,2):element.getAttribute(name);return attr==null?undefined:attr},css:function(e,name,value){if(value==undefined){if(window.getComputedStyle){return window.getComputedStyle(e,null).getPropertyValue(name)}if(e.currentStyle){name=fn.convertStyleName(name);var val=e.currentStyle[name],style=e.style;if(!/\s/.test(val)&&!/^-?\d+(?:px)?$/i.test(val)&&/^-?\d/.test(val)){var left=style.left,rsLeft=e.runtimeStyle&&e.runtimeStyle.left;if(rsLeft){e.runtimeStyle.left=e.currentStyle.left}style.left=name==="fontSize"?"1em":(val||0);val=style.pixelLeft+"px";style.left=left;if(rsLeft){e.runtimeStyle.left=rsLeft}}return val}return e.style[name]}else{e.style[fn.convertStyleName(name)]=value}},copyCss:function(src,dest,css){if(src.nodeType==dest.nodeType==1){var a=css;if(typeof css=="string"){a=[css]}for(var i=0,name;name=a[i];i++){var val=fn.css(src,name);if(val!=undefined&&val!=null){dest.style[fn.convertStyleName(name)]=val}}}},getOpacity:function(e){if(zmCore.browser.msie){if(e.filters["DXImageTransform.Microsoft.Alpha"]==undefined){return 100}return e.filters["DXImageTransform.Microsoft.Alpha"].Opacity/100}else{if(e.currentStyle){return e.currentStyle.opacity}if(window.getComputedStyle){return window.getComputedStyle(e,null).getPropertyValue("opacity")}return e.style.opacity}},cleanHTML:function(html){return zmCore.isString(html)?html.replace(/(<(?!area|base|br|col|embed|frame|hr|img|input|link|meta|param)([a-z]+)[^<]*)\/>/gi,"$1></$2>"):html},checkScriptType:function(e){return e.type=="text/javascript"},getScripts:function(e){if(typeof e.getElementsByTagName=="undefined"){return[]}var scriptTags=e.getElementsByTagName("script"),scripts=[];for(i=0;i<scriptTags.length;i++){var s=scriptTags[i];fn.checkScriptType(s)&&scripts.push(s.parentNode.removeChild(s))}return scripts},evalScripts:function(scripts){var length=scripts.length;for(var i=0;i<length;i++){var s=scripts[i];if(s.src){var e=fn.addScript(s.src,function(){if(e.parentNode){e.parentNode.removeChild(e)}})}else{try{var data=scripts[i].innerHTML;if(window.execScript){window.execScript(data)}else{window.eval.call(window,data)}}catch(e){e=e.stack||e;zmCore.log(e)}}}},fill2:function(value){return value<10?("0"+value):value},initIdleHandler:function(){if(idleHandled){return}idleHandled=true;idleCallbacks=new Array();zmCore(document).mousemove(fn.hasAnAction).keydown(fn.hasAnAction)},idleTrigger:function(){idleStatus=true;var length=idleCallbacks.length;for(var i=0;i<length;i++){idleCallbacks[i].call(window,true)}},hasAnAction:function(){var now=(new Date()).getTime(),i;if(now-lastBusy<5000){return}if(!idleStatus){clearTimeout(idleTimer);if(now-lastBusy>=30000){for(i=0;i<idleCallbacks.length;i++){idleCallbacks[i].call(window,false)}}}else{idleStatus=false;for(i=0;i<idleCallbacks.length;i++){idleCallbacks[i].call(window,false)}}lastBusy=now;idleTimer=setTimeout(fn.idleTrigger,zmCore.idleTimeout)},bindCo:function(){if(!addCOListener){zmCore(document).click(function(event){if(event.button!=0){return}var parents=zmCore(this).parents(),newGroup=null,extracts=new Array();parents["-1"]=this;for(var i=-1,p;p=parents[i];i++){var group=zmCore.data(p,"clickoutside.group");if(!zmCore.isString(group)||group.indexOf("zmcog.")!=0){continue}if(group&&!newGroup){newGroup=group}extracts.push(group)}fn.fireCurCoGroups(extracts,this);if(newGroup&&zmCore.inArray(newGroup,curClickGroups)<0){curClickGroups.push(newGroup)}},-99);if(zmCore.browser.msie){zmCore(document).bind("focusin",function(){if(this.nodeName.toLowerCase()=="iframe"&&!fn.inCurrentGroup(this)){fn.fireCurCoGroups(null,this)}})}else{zmCore(window).blur(function(){if(hoverIframe){fn.fireCurCoGroups(null,this)}});zmCore(document).bind("mouseover",function(){if(this.nodeName.toLowerCase()=="iframe"){hoverIframe=!fn.inCurrentGroup(this)}}).bind("mouseout",function(){if(this.nodeName.toLowerCase()=="iframe"){hoverIframe=false}})}addCOListener=true}},addCoCallback:function(elem,group,parents,callback,weight){if(!coCallbacks){coCallbacks={}}if(!group){group="zmcog."+zmGroupId++}if(!coCallbacks[group]){coCallbacks[group]=new Array()}var added=false;for(var i=0,e;e=coCallbacks[i];i++){if(e.element==elem&&callback==e.callback){added=true;break}}!added&&coCallbacks[group].push({element:elem,callback:callback,weight:weight,parents:parents});coCallbacks[group].sort(fn.sortByWeight);return group},removeCoCallback:function(elem,group){group=group||zmCore.data(elem,"clickoutside.group");var callbacks=coCallbacks[group],i=0;if(!callbacks||callbacks.length<1){return}while(i<callbacks.length){if(callbacks[i]&&callbacks[i].element==elem){callbacks.splice(i,1)}else{i++}}},fireCurCoGroups:function(extractGroups,from){var fire=new Array();for(var i=0,group;group=curClickGroups[i];i++){if(zmCore.inArray(group,extractGroups)<0){fire.push(group)}}fire.length>0&&fn.fireCo(fire,from)},fireCo:function(elem,from,remover){if(zmCore.isArray(elem)){for(var i=0,group;group=elem[i];i++){fn.fireCo(group,from,group)}return}var group=(zmCore.isString(elem)&&elem)||zmCore.data(elem,"clickoutside.group");if(from instanceof zmCore){from=from[0]}if(from&&zmCore.inArray(group,fn.getParentGroups(from))>-1){return}var cbs=coCallbacks[group];if(cbs){for(var i=0,c;c=cbs[i];i++){if(c.callback.call(c.element)==false){break}}}var index;if(!remover){index=zmCore.inArray(group,curClickGroups)}else{index=zmCore.inArray(remover,curClickGroups)}index>=0&&curClickGroups.splice(index,1)},inCurrentGroup:function(elem){var inCurrent;zmCore(elem).parents().each(function(){if(zmCore.inArray(zmCore.data(this,"clickoutside.group"),curClickGroups)>-1){inCurrent=true;return false}});return inCurrent},getParentGroups:function(elem){if(!elem){return}var groups=[],parents=zmCore(elem).parents();for(var i=parents.length-1;i>=0;i--){var g=zmCore.data(parents[i],"clickoutside.group");if(zmCore.isString(g)&&g.indexOf("zmcog.")==0&&zmCore.inArray(g,groups)<0){groups.push(g);if(coCallbacks&&coCallbacks[g]){for(var j=0,cbs;cbs=coCallbacks[g][j];j++){for(var k=0,pg;pg=cbs.parents[k];k++){groups.push(pg)}}}}}return groups},escape:function(s){for(var k in escMap){s=s.replace(k,escMap[k])}return s},transitionFade:function(elems,show,duration,callback){var dur=400,cb=callback;if(zmCore.isNumber(duration)){dur=duration}else{cb=duration}for(var i=0,elem;elem=elems[i];i++){var obj=zmCore(elem);if(!elem.dataset.handleFade){elem.dataset.handleFade=1;obj.transitionEnd(function(event){if(event.propertyName=="opacity"){var target=zmCore(this);target.css("opacity")==0&&target.hide();target.css("opacity","");var callback=target.data("fade.callback");zmCore.isFunction(callback)&&callback.call(target)}}).css({transition:"opacity .4s ease"})}zmCore.data(elem,"fade.callback",cb);dur&&obj.css({"transition-duration":dur+"ms"});if(show){obj.css("opacity",0).show().css("opacity",1)}else{obj.css("opacity",0)}}},fade:function(elems,show,duration,callback){if(supportCSSAnimation){fn.transitionFade(elems,show,duration,callback)}else{var s=zmCore.fadeSpeed||20,r=show?1:-1,cb=callback,op=show?0:1,d=200,maxOp=new Array();for(var i=0,e;e=elems[i];i++){var oop=zmCore.data(e,"opacity");if(oop==undefined||oop==null){oop=fn.getOpacity(e);zmCore.data(e,"opacity",oop)}maxOp.push(oop)}if(zmCore.isNumber(duration)){d=duration}else{cb=duration}elems.data("zmCore.fade",1).opacity(op);if(show&&elems.css("display")=="none"){elems.show()}var intv=setInterval(function(){if(elems.data("zmCore.fade")==2){elems.removeData("zmCore.fade");clearInterval(intv)}else{op+=r*s/d;elems.opacity(op,maxOp);if(show?op>=1:op<=0){elems.opacity("");!show&&elems.hide();zmCore.isFunction(cb)&&cb.call(elems,show);clearInterval(intv)}}},s)}return elems}};var fn=zmCore.fn;if(window.getComputedStyle){var prefixCSS={},uses={},prefixedNames=[],docStyles=window.getComputedStyle(document.documentElement,null),styles=document.createElement("div").style,pushStyle=function(name){if(name.charAt(0)==="-"){prefixedNames.push(name);var arr=name.split("-"),prefix=arr[1];uses[prefix]=++uses[prefix]||1;while(arr.length>3){arr.pop();var prefixed=arr.join("-");validProperty(prefixed)&&prefixedNames.indexOf(prefixed)===-1&&prefixedNames.push(prefixed)}}},validProperty=function(name){return fn.camelCase(name) in styles};if(docStyles.length>0){for(var i=0;i<docStyles.length;i++){pushStyle(docStyles[i])}}else{for(var name in docStyles){pushStyle(fn.deCamelCase(name))}}var prefixInfo={uses:0};for(var prefix in uses){var count=uses[prefix];prefixInfo.uses<count&&(prefixInfo={prefix:prefix,uses:count})}prefixCSS.prefix="-"+prefixInfo.prefix+"-";prefixCSS.properties=[];for(var i=0,name;name=prefixedNames[i];i++){if(name.indexOf(prefixCSS.prefix)===0){var str=name.slice(prefixCSS.prefix.length);validProperty(str)||prefixCSS.properties.push(str)}}fn.camelCase(prefixCSS.prefix)=="Ms"&&!("transform" in styles)&&!("MsTransform" in styles)&&"msTransform" in styles&&prefixCSS.properties.push("transform","transform-origin");prefixCSS.properties.sort();for(var i=0,prop;prop=prefixCSS.properties[i];i++){var standard=fn.camelCase(prop),fullname=prefixCSS.prefix+prop;fn.cssProps[standard]=fn.camelCase(fullname)}}zmCore.version="1.65";zmCore.isReady=false;zmCore.idleTimeout=60000;zmCore.fadeSpeed=15;zmCore.hasStorage=typeof localStorage!=="undefined";zmCore.support={placeholder:supportPlaceholder,localStorage:zmCore.hasStorage,CSSAnimation:supportCSSAnimation};zmCore.placeholderClass="placeholder";zmCore.cookie=function(name,value,options){if(value==undefined){if(document.cookie){var cookies=document.cookie.split(";"),length=cookies.length,nameLength=name.length;for(var i=0;i<length;i++){var cookie=zmCore.trim(cookies[i]);if(cookie.substring(0,nameLength+1)==(name+"=")){value=decodeURIComponent(cookie.substring(nameLength+1));break}}}return value}var defOptions={expires:0,path:"/"};options=zmCore.extend(defOptions,options);var d=new Date(),expires=options.expires,dstr;if(expires==0){dstr=""}else{d.setTime(d.getTime()+expires*1000*60*60*24);dstr="; expires="+d.toUTCString()}document.cookie=name+"="+encodeURIComponent(value)+dstr+"; path="+options.path+(options.domain!=undefined?"; domain="+options.domain:"")+(options.secure?"; secure":"");return zmCore};zmCore.plugins={};zmCore.isInstalled=function(pluginName){return zmCore.plugins[pluginName]!=undefined};zmCore.install=function(pluginName,extFuncs,initCallback){if(zmCore.isInstalled(pluginName)){return false}zmCore.plugins[pluginName]={};for(var func in extFuncs){zmCore.prototype[func]=extFuncs[func]}if(zmCore.isFunction(initCallback)){initCallback()}return true};zmCore.intval=function(val){try{return parseInt(val,10)||0}catch(e){return 0}};zmCore.isArray=function(obj){if(typeof obj!="object"){return false}return Object.prototype.toString.call(obj).match(/array|nodelist/i)!=null};zmCore.isNumber=function(obj){return typeof obj=="number"};zmCore.isString=function(obj){if(typeof obj=="string"){return true}if(obj==undefined||obj==null){return false}if(typeof obj!="object"){return false}if(!obj.constructor){return false}return obj.constructor.toString().match(/string/i)!=null};zmCore.isFunction=function(obj){return typeof obj==="function"||Object.prototype.toString.call(obj).match(/function/i)!=null};zmCore.isEmpty=function(obj){return obj==undefined||obj==null||obj==""||zmCore.isEmptyObject(obj)};zmCore.isEmptyObject=function(obj){for(var key in obj){return false}return true};zmCore.inArray=function(target,list){if(!list){return -1}var length=(list instanceof zmCore)?list.size():list.length;if(isNaN(length)){return -1}for(var i=0;i<length;i++){if(list[i]==target){return i}}return -1};zmCore.objectLength=function(obj){var length=0;for(var key in obj){length++}return length};zmCore.ltrim=function(s,chars){chars=chars||"\\s";return s&&s.replace(new RegExp("^["+chars+"]+","g"),"")};zmCore.rtrim=function(s,chars){chars=chars||"\\s";return s&&s.replace(new RegExp("["+chars+"]+$","g"),"")};zmCore.trim=function(s,chars){return zmCore.ltrim(zmCore.rtrim(s,chars),chars)};zmCore.detectLink=function(text,options){var attrs="",rdUrl=(options&&options.redirectUrl)||"http://me.zing.vn/rd/go?url=";for(var attr in options){attrs+=" "+attr.toString()+'="'+options[attr]+'"'}return text.replace(/((https?|ftp):\/\/(([a-z0-9\$\-_\.+!\*'\(\),;\/\?&=]+)\:([a-z0-9\$\-_\.+!\*'\(\),;\/\?&=]+)\@)?([0-9]+|[a-z0-9]([a-z0-9|-]*[a-z0-9])?\.)*([0-9]+|[a-z]([a-z0-9|-]*[a-z0-9])?)(\:\d+)?((\/[a-z0-9\$\-_\.+!\*'\(\)\|,;\/\?\:\@&=%]*)+([;|?|#][a-z0-9\$\-_\.+!\*'\(\)\|,;\/\?\:\@&=%]*)?)?)/gi,function(m){return'<a href="'+rdUrl+encodeURIComponent(m)+'"'+attrs+">"+m+"</a>"})};zmCore.serialize=function(data){if(typeof JSON=="object"&&JSON.stringify){return JSON.stringify(data)}if(zmCore.isString(data)){return'"'+fn.escape(data)+'"'}var a;if(zmCore.isArray(data)){a=new Array();var length=data.length;for(var i=0;i<length;i++){a.push(zmCore.serialize(data[i]))}return"["+fn.escape(a.join(","))+"]"}if(typeof data=="object"){a=new Array();for(var f in data){a.push('"'+f+'":'+zmCore.serialize(data[f]))}return"{"+fn.escape(a.join(","))+"}"}if(data==undefined){return"undefined"}if(data==null){return"null"}return data.toString()};zmCore.param=function(params){var fields=new Array();for(var f in params){fields.push(encodeURIComponent(f)+"="+encodeURIComponent(params[f]))}return fields.join("&")};zmCore.parseJSON=function(s){if(typeof JSON=="object"&&JSON.parse){return JSON.parse(s)}return eval("("+s+")")};zmCore.formatDateTime=function(t){var e=[[11,"sáng"],[14,"trưa"],[19,"chiều"]],f=["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"],g=new Date(),j=new Date(t*1000),d=Math.floor(g.getTime()/1000)-t;if(d<60){return(d<0?0:d).toString()+" giây trước"}if(d<3600){return Math.floor(d/60)+" phút trước"}if(d<43200){return Math.floor(d/3600)+" tiếng trước"}var h=j.getHours(),m=fn.fill2(j.getMinutes());if(d<518400){var b="tối";for(var i=0;i<3;i++){if(h<e[i][0]){b=e[i][1];break}}d=(g.getDay()+7-j.getDay())%7;var k="";if(d==0){k="hôm nay"}else{if(d==1){k="hôm qua"}else{k=f[j.getDay()]}}return(h%12).toString()+":"+m+" "+b+" "+k}h=fn.fill2(h);return h+":"+m+" "+fn.fill2(j.getDate())+"/"+fn.fill2(j.getMonth()+1)+"/"+j.getFullYear()};zmCore.get=function(url,data,options,success,error){var args=[].concat.apply(["GET"],arguments);if(zmCore.isFunction(data)){args.splice(2,0,{});args.splice(2,0,{})}else{if("dataType" in data){args.splice(2,0,{})}else{if(zmCore.isFunction(options)){args.splice(3,0,{})}}}fn.send.apply(this,args)};zmCore.post=function(url,data,options,success,error){var args=[].concat.apply(["POST"],arguments);(zmCore.isFunction(options)||options==undefined)&&args.splice(3,0,{});fn.send.apply(this,args)};zmCore.ajax=function(options){if(!options||!options.url){return}if(!options.method){options.method="GET"}fn.send(options.method,options.url,options.data,options,options.success,options.error,options.complete)};zmCore.getJSON=function(url,data,success){var jsonName="js"+Math.floor(Math.random()*1000000),querystr="";if(zmCore.isFunction(data)){success=data}else{if(zmCore.isString(data)){querystr=data}else{querystr=zmCore.param(data)}}jsonCallbacks[jsonName]=success;zmCore[jsonName]=function(obj){var jscb=jsonCallbacks[jsonName];if(zmCore.isFunction(jscb)){jscb.call(zmCore,obj)}delete jsonCallbacks[jsonName];document.getElementsByTagName("HEAD")[0].removeChild(e)};var i=url.indexOf("=?");if(i==-1){i=url.indexOf("?");url+=(i==-1?"?":"&")+"callback=zmCore."+jsonName}else{url=url.substr(0,i)+"=zmCore."+jsonName+url.substr(i+14)}if(querystr){url+="&"+querystr}var e=document.createElement("SCRIPT");e.type="text/javascript";e.src=url;document.getElementsByTagName("HEAD")[0].appendChild(e)};zmCore.each=function(list,callback){var result,value;if(zmCore.isArray(list)||list instanceof zmCore){var length=(list instanceof zmCore)?list.size():list.length;for(var i=0;i<length;i++){value=list[i];result=callback.call(value,i,value);if(result===false){break}}}else{for(var field in list){value=list[field];result=callback.call(value,field,value);if(result===false){break}}}};zmCore.cache={};zmCore.data=function(element,name,data){if(!element||(element.nodeName&&noData[element.nodeName.toLowerCase()])){return}element=element==window?windowData:element;var expattr=expandAttr,id=element[expattr];if(!id&&typeof name=="string"&&data==undefined){return null}var cache=zmCore.cache;if(data!=undefined){if(!id){id=++zmId}if(!cache[id]){cache[id]={}}element[expattr]=id;if(typeof name=="string"){cache[id][name]=data}else{cache[id]=data}}return typeof name=="string"?cache[id][name]:cache[id]};zmCore.removeData=function(element,name){if(!element||(element.nodeName&&noData[element.nodeName.toLowerCase()])){return}element=element==window?windowData:element;var expattr=expandAttr,id=element[expattr];if(id==undefined){return}if(name){delete zmCore.cache[id][name];if(zmCore.isEmpty(zmCore.cache[id])){zmCore.removeData(element)}}else{if(delExpandAttr){delete element[expattr]}else{if(element.removeAttribute){element.removeAttribute(expattr)}}delete zmCore.cache[id]}};zmCore.createElement=function(tagName,attributes,css){var e=document.createElement(tagName),f;if(typeof attributes=="object"){for(f in attributes){if(f=="class"){e.className=attributes[f]}else{e.setAttribute(f,attributes[f])}}}if(typeof css=="object"){for(f in css){fn.css(e,f,css[f])}}return e};zmCore.addScript=function(url,callback){if(zmCore.isReady){fn.addScript(url,callback)}else{scripts.push({url:url,callback:callback})}return zmCore};zmCore.ready=function(callback,weight){if(callback!=undefined&&!zmCore.isFunction(callback)){return}var isReady=zmCore.isReady,callbacks=readyCallbacks;if(callback==undefined){}else{if(isReady){callback.call(document)}else{callbacks.push({callback:callback,weight:weight==undefined?0:weight})}}};zmCore.getViewport=function(){var result={},docElem=document.documentElement,body=document.body;if(window.innerWidth){result.width=window.innerWidth;result.height=window.innerHeight}else{if(docElem&&docElem.offsetWidth){result.width=docElem.offsetWidth;result.height=docElem.offsetHeight}else{result.width=body.offsetWidth;result.height=body.offsetHeight}}if(zmCore.isNumber(window.pageYOffset)){result.offsetY=window.pageYOffset;result.offsetX=window.pageXOffset}else{if(docElem&&(docElem.scrollLeft||docElem.scrollTop)){result.offsetY=docElem.scrollTop;result.offsetX=docElem.scrollLeft}else{if(body&&(zmCore.isNumber(body.scrollLeft))){result.offsetY=body.scrollTop;result.offsetX=body.scrollLeft}}}return result};zmCore.getMousePosition=function(event){if(event.pageX||event.pageY){return{left:event.pageX,top:event.pageY}}else{var b=document.documentElement||document.body;return{left:(event.clientX+b.scrollLeft-b.clientLeft),top:(event.clientY+b.scrollTop-b.clientTop)}}};zmCore.filter=function(elements,selector){if(!selector||elements.length==0){return elements}var result=[];if(document.querySelectorAll){for(var i=0,elem;elem=elements[i];i++){if(!elem.parentNode){continue}var filtered=elem.parentNode.querySelectorAll(selector);for(var j=0,ft;ft=filtered[j];j++){if(ft==elem){result.push(elem)}}}}else{var tagName,classes,id,attrs,found=new RegExp("(h[1-6]|[a-z]+)?(\\.[a-z0-9._-]+)?(#[a-z0-9_-]+)?(\\[(.*)\\])?","gi").exec(selector);if(found){tagName=found[1]?found[1].toLowerCase():tagName;classes=found[2]?found[2].substr(1).split("."):classes;id=found[3]?found[3].substr(1):id;attrs=fn.parseAttrStr(found[5])}for(var i=0,cn;cn=elements[i];i++){if(cn.nodeType==1){if((tagName&&cn.nodeName.toLowerCase()!=tagName)||(id&&cn.id!=id)||(classes&&!fn.checkClasses(classes,cn))||!fn.checkAttributes(cn,attrs)){continue}result.push(cn)}}}return result};zmCore.idle=function(callback){fn.initIdleHandler();if(zmCore.isFunction(callback)){idleCallbacks.push(callback)}},zmCore.log=function(){if(typeof console!="undefined"){zmCore.isFunction(console.log)&&console.log.apply(console,arguments)}};zmCore.addStyle=function(text){var style=document.createElement("STYLE"),rules=document.createTextNode(text);style.type="text/css";if(style.styleSheet){style.styleSheet.cssText=rules.nodeValue}else{style.appendChild(rules)}document.getElementsByTagName("HEAD")[0].appendChild(style)};var ua=navigator.userAgent.toLowerCase(),m=ua.match(/(^|\s)(firefox|safari|opera|msie|chrome)[\/:\s]([\d\.]+)/)||["","","0.0"];zmCore.browser={opera:m[2]=="opera",msie:m[2]=="msie",safari:m[2]=="safari",chrome:m[2]=="chrome",firefox:m[2]=="firefox",mozilla:/mozilla/.test(ua),version:(ua.match(/\sversion\/([\d\.]+)/)||["",m[3]])[1]};zmCore.storage={put:function(key,item,exp,force){key="zmvar-"+key;if(exp==undefined){exp=0}if(exp!=0){exp=exp*1000}if(zmCore.hasStorage){if(exp!=0){exp+=(new Date()).getTime()}localStorage.setItem(key,zmCore.serialize({data:item,expires:exp}))}else{if(force){zmCore.cookie(key,zmCore.serialize(item),{expires:exp/(1000*60*60*24)})}}},get:function(key,force){try{key="zmvar-"+key;if(zmCore.hasStorage){var item=localStorage.getItem(key);if(item){var obj=zmCore.parseJSON(item);if(obj.expires==0||obj.expires>(new Date()).getTime()){return obj.data}localStorage.removeItem(key)}}else{if(force){return zmCore.parseJSON(zmCore.cookie(key))}}}catch(e){}},remove:function(key){this.put(key,null,-1,true)}};if(zmCore.hasStorage){var now=(new Date()).getTime();try{for(var i=0,l=localStorage.length;i<l;i++){var key=localStorage.key(i),item=localStorage.getItem(key);if(item){try{var obj=zmCore.parseJSON(item);if(obj.expires!=0&&obj.expires<=now){localStorage.removeItem(key)}}catch(ex){}}}}catch(ex){}}function fireReady(){if(isReady){return}isReady=zmCore.isReady=true;readyCallbacks.sort(fn.sortByWeight);for(var i=0,c;c=readyCallbacks[i];i++){try{c.callback.call(document)}catch(e){e=e.stack||e;zmCore.log(e)}}fn.loadScripts()}if(window.zm==undefined){window.zm=zmCore;if(document.readyState=="complete"||document.readyState=="loaded"){fireReady()}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);fireReady()},false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState=="complete"){document.detachEvent("onreadystatechange",arguments.callee);fireReady()}});if(window==window.top&&document.documentElement.doScroll){(function(){if(isReady){return}try{document.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}fireReady()})()}}}}}})(window);
