(function(a){a.wgItem=function(a,b){this.id=a;this.rel=b};if(a.zwgConf===undefined){a.zwgConf={avaWidth:45,avaHeight:45,avaSize:50,avaInit:"http://widget.me.zing.vn/images/160.gif",wgAuto:"off",avaPat:"ZMEA",disPat:"ZMED",pLink:"http://me.zing.vn/",wgLink:"http://widget.me.zing.vn",saoLink:"http://img.me.zdn.vn/v3/images/icostar_sml.gif",bizLink:"http://img.me.zdn.vn/v3/images/icoflag_sml.gif",cdLink:"http://img.me.zdn.vn/v3/images/icocom_sml.gif",saoLinkG:"http://img.me.zdn.vn/v3/images/icostargrey_sml.gif",bizLinkG:"http://img.me.zdn.vn/v3/images/icoflagrey_sml.gif",cdLinkG:"http://img.me.zdn.vn/v3/images/icocomgrey_sml.gif"}}})(window);(function(){if(window.zwg===undefined){var a_prf="wga";var d_prf="wgd";var fa="zwg.fA";var fd="zwg.fD";var items=new Array;function _fA(a){return a}function _fD(a,b,c,d,e,f,g,h,i){if(b==undefined)b="";var j="";var k="";if(a==null||a==undefined)j=__fD(b,d,e,f,g);else if(a==1&&b==""&&h!="0"){if(i==null||i==undefined||i==1)j="<img style='margin: 0 5px 5px 0; vertical-align: middle;' src='"+zwgConf.saoLink+"'>"+__fD(b,d,e,f,g);else j="<img style='margin: 0 5px 5px 0; vertical-align: middle;' src='"+zwgConf.saoLinkG+"'>"+__fD(b,d,e,f,g)}else if(a==2&&b==""&&h!="0"){if(i==null||i==undefined||i==1)j="<img style='margin: 0 5px 3px 0; vertical-align: middle;' src='"+zwgConf.bizLink+"'>"+__fD(b,d,e,f,g);else j="<img style='margin: 0 5px 3px 0; vertical-align: middle;' src='"+zwgConf.bizLinkG+"'>"+__fD(b,d,e,f,g)}else if(a==3&&b==""&&h!="0"){if(i==null||i==undefined||i==1)j="<img style='margin: 0 5px 5px 0; vertical-align: middle;' src='"+zwgConf.cdLink+"'>"+__fD(b,d,e,f,g);else j="<img style='margin: 0 5px 5px 0; vertical-align: middle;' src='"+zwgConf.cdLinkG+"'>"+__fD(b,d,e,f,g)}else j=__fD(b,d,e,f,g);return j}function __fD(a,b,c,d,e){if(e=="f"){c=_gf(c)}if(c=="")c=d;if(a)c=zm("#"+a).html();return _cs(c,b)}function _fEr(){return"this.src='"+zwgConf.avaInit+"';"}function _gf(a){var b=a.lastIndexOf(" ");if(b===-1)return a;else return a.substring(b+1,a.length)}function _cs(a,b){if(b!=null&&parseInt(b)>0){if(a.length<parseInt(b)+3)return a;return a.substring(0,b)+"..."}else return a}function _fL(a,b,c,d){if(a==undefined||a==0)return d;else if(a==1)return"<a id='"+b+"' href='"+c+"'>"+d+"</a>";else if(a==2)return"<a id='"+b+"' target='_blank' href='"+c+"'>"+d+"</a>";else if(a==3)return"<a id='"+b+"' target='_parent' href='"+c+"'>"+d+"</a>";else return d}function _pAva(a,b){var c=a.attr("id");var d={};var e=_fEr();var f=b.indexOf("?");var g="";var h=zwgConf.avaWidth,i=zwgConf.avaHeight,j="";var k=zwgConf.avaSize;var l=0,m=0,n=0;if(f!=-1){para=_parseParam(b);if(para["width"])h=para["width"];if(para["height"])i=para["height"];if(para["class"])j=para["class"];if(para["l"])m=para["l"];if(para["size"])k=para["size"];if(para["id"])l=parseInt(para["id"]);if(para["m"])n=para["m"];b=b.substr(0,f)}if(l)g="a.i."+b+"."+k;else g="a.n."+b+"."+k;var o="<img ";var p="";o+=' k="'+g+'"';if(j)o+=' class="'+j+'"';o+=' width="'+h+'"';o+=' height="'+i+'"';o+=' l="'+m+'"';o+=' id="'+a_prf+c+'"';o+=' m="'+n+'"';var q=_gc(g);if(q!=null){var r=q.value;var s=q.dis;var t=q.u;var u=_fA(r);o+=' src="'+u+'"';o+=' onerror="'+e+'"';o+="/>";if(m!=null&&m!=undefined&&m!=""){var v=zwgConf.pLink+t;o=_fL(m,c+"L",v,o)}a.html(o);a.attr("ref_f","1");var w=zm("#"+c+"L");if(n==1&&w){if(typeof zmPW!="undefined"){zmPW.mixHover(w)}}return""}if(zwgConf.avaInit!="")o+=' src="'+zwgConf.avaInit+'"';o+=' onerror="'+e+'"';o+="/>";if(m!=null&&m!=undefined&&m!="")o=_fL(m,c+"L","#",o);a.html(o);a.attr("rel_f","1");d.type="a";d.uname=b;d.id=l;if(k!=zwgConf.avaSize)d.holder=c+"-"+k;else d.holder=c;return d}function _pDis(a,b){var c=a.attr("id");var d={};var e=b.indexOf("?");var f="",g="",h="",i="",j="";var k=0,l=0,m=0;var n="";if(e!=-1){para=_parseParam(b);if(para["class"])g=para["class"];if(para["l"])l=para["l"];if(para["id"])k=parseInt(para["id"]);if(para["cnt"])i=para["cnt"];if(para["c"])h=para["c"];if(para["n"])j=para["n"];if(para["vi"])n=para["vi"];if(para["m"])m=para["m"];b=b.substr(0,e)}if(k)f="d.i."+b;else f="d.n."+b;var o="";if(l>0)o="<a";else o="<span";o+=' k="'+f+'"';if(g)o+=' class="'+g+'"';o+=' l="'+l+'"';o+=' c="'+h+'"';o+=' n="'+j+'"';o+=' cnt="'+i+'"';if(n!="")o+=' vi="'+n+'"';o+=' id="'+d_prf+c+'"';o+=' m="'+m+'"';var p=_gc(f);if(p!=null){var q=p.value;var r=p.u;var s=p.v;var t=_fD(s,i,l,h,q,r,j,n);o+=' href="'+zwgConf.pLink+r+'"';if(l>0){o+=' title="'+q+'"';if(l==2)o+=' target="_blank"';else if(l==3)o+=' target="_parent"';o+=">"+t+"</a>"}else o+=">"+t+"</span>";a.html(o);a.attr("rel_f","1");var u=zm("#"+d_prf+c);if(m==1&&u){if(typeof zmPW!="undefined"){zmPW.mixHover(u)}}return""}else{if(l>0)o+="></a>";else o+="></span>"}a.html(o);a.attr("rel_f","1");d.type="d";d.uname=b;d.id=k;d.holder=c;return d}function _pItem(a,b){if(!a.id)return false;var c=zm("#"+a.id);if(!c)return false;if(!b||b!=1)if(c.attr("rel_f")=="1")return false;c=zm("#"+a.id);if(a.rel){c.attr("rel",a.rel)}var d=c.attr("rel");if(d==undefined)return false;var e=d.substr(0,5).toUpperCase();var f=d.substr(5);if(e==zwgConf.avaPat+"_"){return _pAva(c,f)}else if(e==zwgConf.disPat+"_"){return _pDis(c,f)}else return false}function _pass(a,b,c,d,e){if(a==""&&b==""&&c==""&&d==""){if(typeof e==="function")e();return}var f="cb"+Math.floor(Math.random()*1e6);zwg.jsonCbs[f]=function(){if(typeof e==="function")e();delete zwg.jsonCbs[f];document.getElementsByTagName("HEAD")[0].removeChild(i);return};var g="";var h=zwgConf.avaSize;if(e!="")g=zwgConf.wgLink+"/api/widget?method=getMixExCb&size="+h+"&ava_list="+a+"&display_list="+b+"&ava_list_id="+c+"&display_list_id="+d+"&fa="+fa+"&fd="+fd+"&cb=zwg.jsonCbs['"+f+"']";else g=zwgConf.wgLink+"/api/widget?method=getMixEx&size="+h+"&ava_list="+a+"&display_list="+b+"&ava_list_id="+c+"&display_list_id="+d+"&fa="+fa+"&fd="+fd;var i=document.createElement("script");i.setAttribute("src",g);i.setAttribute("type","text/javascript");i.setAttribute("charset","utf-8");i.setAttribute("defer","defer");i.setAttribute("async","async");document.getElementsByTagName("HEAD")[0].appendChild(i)}function _parseParam(param){var ret={};var arr=param.split("?");if(arr[1]!=null){var arr2=arr[1].split("&");for(i=0;i<arr2.length;i++){var arr3=arr2[i].split("=");eval("ret['"+arr3[0]+"']='"+arr3[1]+"'")}}return ret}function _gc(a){return zm.data(window,a)}function _sc(a,b){zm.data(window,a,b)}function _chkHolder(a,b){if(a[b]===undefined)return false;else return true}function _log(a){console.log(a)}function _chkZm(){if(!window.zm){_log("zmCore not found");return false}return true}function _addWgItem(a){if(a.id)items.push(a)}window.zwg={jsonCbs:{},test:function(a){return _parseParam(a)},fD:function(a,b,c,d,e){if(!_chkZm())return;var f=zm("#"+d_prf+a);if(f!=null){var g=f.attr("k");var h=parseInt(f.attr("l"));var i=f.attr("c");var j=f.attr("cnt");var k=f.attr("n");var l=f.attr("vi");var m=f.attr("m");if(!l)l="";if(g!=null&&g!=undefined){var n={value:b,v:c,u:d,ico:e};_sc(g,n)}var o="#",p="";if(h==1)o=zwgConf.pLink+d;else if(h==2){o=zwgConf.pLink+d;p="_blank"}else if(h==3){o=zwgConf.pLink+d;p="_parent"}f.attr("title",b);f.attr("href",o);if(p!="")f.attr("target",p);f.html(_fD(c,j,h,i,b,d,k,l,e));if(m==1){if(typeof zmPW!="undefined"){zmPW.mixHover(f)}}}},fA:function(a,b,c,d){if(!_chkZm())return;var e=zm("#"+a_prf+a);if(e!=null){var f=e.attr("k");var g=e.attr("l");var h=e.attr("m");if(f!=null&&f!=undefined){var i={value:b,u:c,dis:d};_sc(f,i)}var j=_fA(b);e.attr("src",j);e.attr("title",d);if(g!=null&&g!=undefined){var k=zwgConf.pLink+c;var l=zm("#"+a+"L");if(l){l.attr("href",k);if(h==1){if(typeof zmPW!="undefined"){zmPW.mixHover(l)}}}}}},addWgItem:function(a){if(!_chkZm())return;_addWgItem(a)},addItem:function(a,b){if(!_chkZm())return;_addWgItem(new wgItem(a,b))},fillWg:function(a,b){if(!_chkZm())return;var c=new Array;var d=new Array;var e=new Array;var f=new Array;if(items.length<1)return;for(var g=0;g<items.length;g++){var h=_pItem(items[g],b);if(h==false)continue;var i=h.uname;var j;var k;if(h.type=="a"){if(h.id==0)j=c;else j=d}else if(h.type=="d"){if(h.id==0)j=e;else j=f}if(_chkHolder(j,i)){j[i]+=h.holder+"|"}else{j[i]=h.holder+"|"}}items=new Array;var l="",m="",n="",o="";var p;for(p in c)l+=p+"?"+c[p]+",";for(p in d)m+=p+"?"+d[p]+",";for(p in e)n+=p+"?"+e[p]+",";for(p in f)o+=p+"?"+f[p]+",";_pass(l,n,m,o,a)}}}})();if(zwgConf.auto=="on"){zm.ready(function(){zwg.fillWg()})}
